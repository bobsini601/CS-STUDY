# [10μ£Όμ°¨] μΈν„°λ½νΈ

λ‚ μ§: 2022λ…„ 10μ›” 2μΌ
μ§„ν–‰μƒν™©: Done
νƒκ·Έ: OS

---

# μΈν„°λ½νΈ

---

<aside>
π’΅ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” λ„μ¤‘μ— μκΈ°μΉ μ•μ€ μƒν™©μ΄ λ°μƒν•  κ²½μ°, ν„μ¬ μ‹¤ν–‰μ¤‘μΈ μ‘μ—…μ„ μ¤‘λ‹¨ν•κ³  λ°μƒλ μƒν™©μ„ μ²λ¦¬ν• ν›„, λ‹¤μ‹ μ‹¤ν–‰μ¤‘μΈ μ‘μ—…μΌλ΅ λ³µκ·€ν•λ” κ²ƒ

</aside>

- μ‚¬μ „μ μΈ μλ―Έλ΅λ” **λ°©ν•΄ν•λ‹¤, μ¤‘λ‹¨μ‹ν‚¤λ‹¤** λΌλ” λ»μ„ κ°€μ§„λ‹¤.
- OSμ μΈ μλ―Έλ΅λ” **CPUμ μ •μƒμ μΈ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰μ„ λ°©ν•΄ν–λ‹¤** λ” μλ―Έλ¥Ό κ°€μ§„λ‹¤.
- μΈν„°λ½νΈμ ν™μ©
    
    ---
    
    ```python
    OSλ” μ„λ΅ λ‹¤λ¥Έ μΌμ„ ν•λ” μλ§μ€ ν•λ“μ›¨μ–΄λ¥Ό μ‚¬μ©ν•λ‹¤. μ΄λ° μ¥μΉλ“¤μ€ λ™κΈ°μ μΌλ΅ κµ¬λ™λλ”λ°,
    μ΄λ” κ°κ° λ™μ‘μ΄ μ™„λ£λ  λ• κΉμ§€ κΈ°λ‹¤λ ¤μ•Ό ν•λ―€λ΅ "μ•„λ¬΄κ²ƒλ„ ν•μ§€ μ•μΌλ©΄μ„ λ°”μ μƒνƒ"λ΅ λ§μ€
    μ‹κ°„μ„ μ†λΉ„ν•κ² λλ‹¤. 
    -> μΈν„°λ½νΈλ¥Ό ν™μ©ν•μ—¬ **ν•λ²μ— ν•λ‚μ λ…λ Ήλ§ μν–‰ν•  μ μλ” CPUμ ν•κ³„μ„±μ„ λ³΄μ™„**ν•  μ μλ‹¤
    ```
    

## μΈν„°λ½νΈμ μΆ…λ¥

---

### [1]. μ™Έλ¶€ μΈν„°λ½νΈ

---

<aside>
π’΅ CPU μ½”μ–΄ **μ™Έλ¶€μ—μ„ μ–΄λ–¤ μΌμ΄ λ°μƒν• κ²ƒμ„ μ „κΈ°μ μΈ μ‹ νΈλ΅ CPUμ—κ² ν†µμ§€**ν•λ” κ²½μ°

</aside>

- **`μ •μ „β€Άμ „μ›μ΄μƒ μΈν„°λ½νΈ`**Β : μ •μ „ λλ” μ „μ›κ³µκΈ‰μ μ΄μƒμΌλ΅ μΈν• μΈν„°λ½νΈ
- **`κΈ°κ³„κ³ μ¥ μΈν„°λ½νΈ`**Β : CPU λ° κΈ°νƒ€ ν•λ“μ›¨μ–΄μ μ¤λ¥λ΅ μΈν• μΈν„°λ½νΈ
- **`μ™Έλ¶€ μΈν„°λ½νΈ`**Β : Timer λ‚ Operator λ΅ μΈν• μΈν„°λ½νΈ
- **`μ…μ¶λ ¥ μΈν„°λ½νΈ`**Β : μ…μ¶λ ¥μ μΆ…λ£λ‚ μ…μ¶λ ¥μ μ¤λ¥λ΅ μΈν• μΈν„°λ½νΈ

### [2]. λ‚΄λ¶€ μΈν„°λ½νΈ

---

<aside>
π’΅ CPU μ½”μ–΄ μ™Έλ¶€μ—μ„ μΈν„°λ½νΈλ¥Ό κ±°λ” κ²½μ°κ°€ μΌλ°μ μ΄μ§€λ§, CPU λ‚΄λ¶€μ—μ„ μ‹¤ν–‰ν•λ©΄μ„ μΈν„°λ½νΈμ— κ±Έλ¦¬λ” κ²½μ°

</aside>

- `**ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈ**` : Divide by Zero, Overflow/underflow λ“±

### [3]. μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ ( = Trap )

---

<aside>
π’΅ μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰μ‹ν‚¤κ±°λ‚ `**Supervisor(=OS)**`λ¥Ό νΈμ¶ν•λ” λ™μ‘μ„ μν–‰ν•λ” κ²½μ°

</aside>

- `**SVC( SuperVisor Call )**` : OSλ¥Ό νΈμ¶ν•λ” λ™μ‘μ„ μν–‰ν•λ” κ²½μ°

## μΈν„°λ½νΈ λ™μ‘μμ„

---

### [1]. μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •

---

<aside>
π’΅ μ”μ²­ β†’ μ¤‘λ‹¨ β†’ λ³΄κ΄€ β†’ μ²λ¦¬ β†’ μ¬κ°

</aside>

- **μ²λ¦¬ κ³Όμ •**
    
    ---
    
    **1. μΈν„°λ½νΈ μ”μ²­
    2. ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘λ‹¨**
    	 - ν„μ¬ μ‹¤ν–‰μ¤‘μ΄λ `**Micro Operation**` κΉμ§€ μν–‰
    **3. ν„μ¬ μ‹¤ν–‰μ¤‘μΈ ν”„λ΅κ·Έλ¨ μƒνƒ λ³΄κ΄€**
    	 - `**Interrupt Vector**` λ¥Ό μ½μ–΄ **`ISR`** μ£Όμ†κ°’μ„ μ–»μ
    	 - `**ISR**`λ΅ μ ν”„ ( μ΄ λ•, PC κ°’μ€ μλ™ λ€ν”Ό μ €μ¥λ¨ )
    	 - ν„μ¬ μ§„ν–‰μ¤‘μΈ ν”„λ΅κ·Έλ¨μ λ μ§€μ¤ν„°λ¥Ό λ€ν”Όν•¨
    **4. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μ²λ¦¬**
    	 - μΈν„°λ½νΈ μ›μΈμ„ νμ•…ν•κ³  μ‹¤μ§μ μΈ μ‘μ—… μν–‰
    	 - μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰ μ¤‘, μ°μ„ μμ„κ°€ λ” λ†’μ€ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ μ¬κ·€μ μΌλ΅ 1~5 λ°λ³µ
    **5. μƒνƒ λ³µκµ¬**
    	 - ν•΄λ‹Ή μ‘μ—…μ„ λ‹¤ μ²λ¦¬ν•λ©΄, λ€ν”Όμ‹ν‚¨ λ μ§€μ¤ν„°λ¥Ό λ³µμ›ν•λ‹¤
    	 - `**ISR**` λμ— `**RETI**` λ…λ Ήμ–΄μ— μν•΄ μΈν„°λ½νΈ ν•΄μ 
    	 - λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄, PC κ°’μ„ λ³µμ›ν•μ—¬ μ΄μ „ μ‹¤ν–‰ μ„μΉλ΅ λ³µμ›
    
    - `**Micro Operation`** :
    - **`Interrupt Vector` :**
    - `**ISR**` :
    - `**RETI**` :
    

### [2]. μΈν„°λ½νΈ λ²΅ν„° ( Interrupt Vector )

---

<aside>
π’΅ μ—¬λ¬ μΆ…λ¥μ **μΈν„°λ½νΈμ— λ€ν• ISRμ μ‹μ‘ μ£Όμ†**

</aside>

- μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ” :

μ£ΌκΈ°μ–µμ¥μΉμ νΉμ • μμ—­μ— μ—¬λ¬ κ°μ μΈν„°λ½νΈμ— λ€ν• μΈν„°λ½νΈ λ²΅ν„°λ¥Ό λ¨μ•„λ†“μ€ μμ—­

- β“Β μΈν„°λ½νΈ μ”μ²­μ΄ λ°μƒν–μ„ λ• CPUκ°€ ν•λ” μΌμ€?
    
    π™. μΈν„°λ½νΈ μ†μ¤κ°€ λ¬΄μ—‡μΈμ§€, ν•΄λ‹Ή μΈν„°λ½νΈ ISRμ΄ μ–΄λ””μ— μ μ¬λμ–΄ μλ”μ§€ ν™•μΈν•λ‹¤.
    
    β†’ μ΄ λ•, μΈν„°λ½νΈ λ²΅ν„°λ¥Ό ν™μ©
    

### [3]. μΈν„°λ½νΈ ν•Έλ“¤λ¬ ( Interrupt Handler )

---

**κ³Όμ •**

1. `**CPU**` μ—μ„ μΈν„°λ½νΈκ°€ μ ‘μλλ©΄, ν•΄λ‹Ή `**μΈν„°λ½νΈ ν•Έλ“¤λ¬**` μ½”λ“μ μ„μΉλ¥Ό μ°Ύκ³  μ‹¤ν–‰μ— μ®κΈ΄λ‹¤.
2. μ‹¤ν–‰μ¤‘μ΄λ `**λ μ§€μ¤ν„°**`μ™€ `**PC**`λ¥Ό λ³΄κ΄€ν•¨μΌλ΅μ¨ CPUμ μƒνƒλ¥Ό λ³΄μ΅΄ν•λ‹¤.
3. μΈν„°λ½νΈ ν•Έλ“¤λ§μ΄ μ™„λ£λλ©΄ μ΄μ „μ μƒνƒλ΅ λ³µκ·€ν•λ‹¤.

### [4]. PC ( Program Counter )

---

- CPU λ‚΄λ¶€μ— μλ” **λ μ§€μ¤ν„° μ¤‘μ ν•λ‚**μ΄λ‹¤.
- **λ‹¤μμ— μ‹¤ν–‰λ  λ…λ Ήμ–΄μ μ£Όμ†λ¥Ό** κ°€μ§€κ³  μμ–΄ **μ‹¤ν–‰ν•  κΈ°κ³„μ–΄ μ½”λ“μ μ„μΉλ¥Ό μ§€μ •**ν•λ‹¤.
    
    β†’ ν•΄λ‹Ή νΉμ„±μΌλ΅ μΈν•΄ `**λ…λ Ήμ–΄ ν¬μΈν„°**`λΌκ³ λ„ λ¶λ¦°λ‹¤.
    

### [5]. μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ I/Oλ¥Ό ν•λ” κ³Όμ •

---

- Mode bit
    
    ---
    
    `**μ μ € λ¨λ“(1)**` : μ‚¬μ©μ ν”„λ΅κ·Έλ¨ μν–‰
    
    `**μ»¤λ„ λ¨λ“(0)**` : OS μ½”λ“ μν–‰
    
- μ²λ¦¬ κ³Όμ •
    
    ---
    
    1. SVC β†’ μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ OSμ—κ² I/O μ”μ²­
    2. [[3]. μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ ( = Trap )](%5B10%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%5D%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%85%E1%85%A5%E1%86%B8%E1%84%90%E1%85%B3%206dbd4f15b4e043a2af4d2f83de2269e2.md)  μ„ μ‚¬μ©ν•μ—¬ μΈν„°λ½νΈ λ²΅ν„°μ νΉμ • μ„μΉλ΅ μ΄λ™
    3. μ μ–΄κ¶μ΄ μΈν„°λ½νΈ λ²΅ν„°κ°€ κ°€λ¦¬ν‚¤λ” ISRλ΅ μ΄λ™
    4. μ¬λ°”λ¥Έ I/O μΈμ§€ ν™•μΈ ν›„μ— μ‹¤ν–‰ν•λ‹¤.
    5. I/O μ™„λ£ μ‹, μ μ–΄κ¶μ„ SVC λ‹¤μ λ…λ ΉμΌλ΅ μ΄λ™
    
- μΈν„°λ½νΈμ™€ νΈλ©( μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ )μ μ°¨μ΄μ 
    
    ---
    
    μΈν„°λ½νΈ
    
    - ν•λ“μ›¨μ–΄μ μΈ νλ¦„μ λ³€ν™”
    - ν”„λ΅κ·Έλ¨μ μ™Έλ¶€ μƒν™©μ— λ”°λΌ λ°μƒ μ‹μ μ΄ μΌμ •ν•μ§€ μ•λ‹¤ β†’ `**λΉ„λ™κΈ°μ **`
    
    νΈλ©
    
    - μ†ν”„νΈμ›¨μ–΄μ μΈ νλ¦„μ λ³€ν™”
    - λ°μƒ μ‹μ μ΄ ν”„λ΅κ·Έλ¨μ μΌμ •ν• μ§€μ 
        
        β†’ `**λ™κΈ°μ **`
        

## μΈν„°λ½νΈ μ°μ„ μμ„

---

<aside>
π’΅ **`μ •μ „β€Άμ „μ›μ΄μƒ μΈν„°λ½νΈ` β†’** Β **`κΈ°κ³„κ³ μ¥ μΈν„°λ½νΈ` β†’ `μ™Έλ¶€ μΈν„°λ½νΈ`** β†’Β **`μ…μ¶λ ¥ μΈν„°λ½νΈ`**
β†’ Β **`ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈ`**Β β†’Β **`SVC(SuperVisor Call)`**

</aside>

### μ°μ„ μμ„ νλ³„ λ°©λ²•

---

### [1]. ν΄λ§ ( Polling )

---

<aside>
π’΅ κ°€μ¥ λ†’μ€ μΈν„°λ½νΈλ΅λ¶€ν„° μ”μ²­ ν”λκ·Έλ¥Ό κ²€μ‚¬ν•μ—¬ `**ISR**` μ„ μν–‰ν•λ” μ†ν”„νΈμ›¨μ–΄μ μΈ λ°©λ²•

</aside>

- μΈν„°λ½νΈλ¥Ό μ΅°μ‚¬ν•λ” λΉ„μ©μ΄ λ“¤μ–΄ λ°μ‘μ‹κ°„μ΄ λλ¦¬λ‹¤.
- ν•λ“μ›¨μ–΄λ¥Ό μ¶”κ°€ν•  ν•„μ”κ°€ μ—†μ–΄ νλ΅κ°€ κ°„λ‹¨ν•λ‹¤

### [2]. λ°μ΄μ§€ μ²΄μΈ (  Daisy Chain )

---

<aside>
π’΅ μ–΄λ””μ— μΈν„°λ½νΈκ°€ λ°μƒν•λ”μ§€ ν™•μΈν•λ” νλ΅λ¥Ό μ§λ ¬λ΅ μ—°κ²°ν• ν•λ“μ›¨μ–΄μ μΈ λ°©λ²•

</aside>